<div>
  <div class="form-row">
    @if (!citation()) {
    <div class="muted">(no citation)</div>
    }
    <!-- view -->
    <cadmus-refs-citation-view
      [citation]="citation()"
      [defaultSchemeId]="defaultSchemeId()"
    />
    <!-- editor -->
    <button
      type="button"
      mat-icon-button
      matSuffix
      matTooltip="Toggle editor"
      (click)="editorExpanded = !editorExpanded"
    >
      @if (editorExpanded) {
      <mat-icon class="mat-primary">publish</mat-icon>
      } @if (!editorExpanded) {
      <mat-icon class="mat-primary">get_app</mat-icon>
      }
    </button>
  </div>

  <!-- editor -->
  <mat-expansion-panel
    id="visual"
    [expanded]="editorExpanded"
    (expandedChange)="editorExpanded = $event"
  >
    @if (b()) {
    <h3>A</h3>
    }
    <cadmus-refs-citation [citation]="a()" />
    @if (b()) {
    <h3>B</h3>
    <cadmus-refs-citation [citation]="b()" />
    }
  </mat-expansion-panel>
</div>
